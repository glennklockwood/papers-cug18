\section{TOKIO Architecture \& Implementation}

The TOKIO framework is comprised of four logical layers as shown in Figure \ref{fig:tokio-architecture}:

\begin{enumerate}
\item \textbf{Component-level monitoring tools} are the I/O profiling and monitoring tools that are already used by HPC centers to monitor application I/O patterns (e.g., Darshan~\cite{Carns2009}), file system server load (e.g., LMT~\cite{Keopp2014} or Caribou~\cite{Flaskerud2017}), job topology (e.g., Cray's Service Database and Slurm), file system health (e.g., Lustre's \texttt{lfs df} and \texttt{lctl dl} commands), and other I/O components.
\item \textbf{TOKIO connectors} interact with component-level tools using each tool's native interface and data formats and translate these tool-specific data formats into semantically normalized data in standard  data objects.  In pytokio, the reference implementation of TOKIO, connectors are implemented as classes that expose each tool's data as dictionaries, dataframes, and arrays.
\item \textbf{TOKIO tools} provide convenience functions and wrappers around TOKIO connectors.  For example, TOKIO provides a \texttt{topology} tool which converts a user job ID into a job radius by converting the job ID into a node list using the Slurm connector, and then the node list into topological coordinates using the Cray SDB connector.
\item \textbf{Analysis applications} are specific performance analysis tools that use TOKIO connectors and tools to combine data from multiple components to synthesize new insights into I/O performance.
\end{enumerate}

\begin{figure}[t]
    \centering
    \includegraphics[width=0.7\columnwidth]{tokio-architecture-v3}
    \vspace{-.3in}
    \caption{TOKIO Architecture.  \texttt{tokio.connectors} take input from component-level monitoring tools in their native output formats and expose that data to upstream analysis in standard data formats such as key-value pairs, Pandas DataFrames, and NumPy arrays. \texttt{tokio.tools} provide indices, site-specific data placement information, and enhanced usability.}
    \label{fig:tokio-architecture}
    \vspace{-.2in}
\end{figure}

By connecting many of the components included with Cray XC and ClusterStor systems, TOKIO enables a holistic view of I/O performance and file system health without the need to provision new monitoring infrastructure.